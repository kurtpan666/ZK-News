import{a as g}from"/build/_shared/chunk-K2NIQJCE.js";import{a as f}from"/build/_shared/chunk-4EU6SQ7H.js";import{a as i,b as m,c as p,d as a}from"/build/_shared/chunk-EN27VTUB.js";import{b as o}from"/build/_shared/chunk-MC7GRPCH.js";import{c as u,g as s}from"/build/_shared/chunk-EFF4OLHG.js";s();s();var n=u(g());var w=u(f());var v=async({request:c})=>{let e=await m(c.headers.get("Cookie"));if(e.get(i.USER_ID))return o("/login?how=user",{headers:{"Set-Cookie":await a(e)}});try{let r=await c.formData(),t=r.get("id"),d=r.get("password");return(0,n.default)(t,"id field is required."),(0,n.default)(d,"password field is required."),await w.userService.registerUser({id:t,password:d}),e.set(i.USER_ID,t),o(`/user?id=${t}`,{headers:{"Set-Cookie":await p(e)}})}catch(r){return o(`/login?how=${r.code}`,{headers:{"Set-Cookie":await a(e)}})}};export{v as action};
